<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25">
<Class name="Vacancy.PopUtils">
<Description>
Заполнение проекта тестовыми данными </Description>
<TimeCreated>63006,70825.934576</TimeCreated>

<Method name="Country">
<ClassMethod>1</ClassMethod>
<ReturnType>%String</ReturnType>
<Implementation><![CDATA[
    s t1=$lb("Россия","Украина","Белоруссия","Казахстан","Эстония","Латвия","Литва","Чехия","США","Франция","Польша")
    return $li(t1,$r($ll(t1))+1)
]]></Implementation>
</Method>

<Method name="Login">
<ClassMethod>1</ClassMethod>
<FormalSpec>prefix:%String</FormalSpec>
<ReturnType>%String</ReturnType>
<Implementation><![CDATA[
	set num1 = $r(9999) + 1
	set num1 = $tr( $j(num1,5), " ", "0") ; заменить пробелы на нули
	Quit prefix_num1
]]></Implementation>
</Method>

<Method name="Pass">
<ClassMethod>1</ClassMethod>
<ReturnType>%String</ReturnType>
<Implementation><![CDATA[
	set num1 = $r(9999) + 1, num2 = $r(9999) + 1
	set num1 = $tr( $j(num1,5), " ", "0") ; заменить пробелы на нули
	set num2 = $tr( $j(num2,5), " ", "0") ; заменить пробелы на нули
	Quit num1_num2
]]></Implementation>
</Method>

<Method name="VacancyName">
<ClassMethod>1</ClassMethod>
<ReturnType>%String</ReturnType>
<Implementation><![CDATA[
    s t1=$lb("Программист", "Администратор", "Проектировщик БД", "Мэнеджер", "Аналитик")
    Quit $li(t1,$r($ll(t1))+1)
]]></Implementation>
</Method>

<Method name="Rebuild">
<Description>
Удаляем существующие данные и добавляем новые тестовые
count - сколько записей в каждую таблицу добавить</Description>
<ClassMethod>1</ClassMethod>
<FormalSpec>count:%Integer</FormalSpec>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
	; удалить все данные
	do ##class(Vacancy.SystemUser).%KillExtent()
	do ##class(Vacancy.Vacancy).%KillExtent()
	do ##class(Vacancy.Company).%KillExtent()	
	; создать тестовые данные в правильном порядке
	do ##class(Vacancy.SystemUser).Populate(count,1)
	do ##class(Vacancy.Vacancy).Populate(count,1)
	do ##class(Vacancy.Company).Populate(count,1)
	Quit $$$OK
]]></Implementation>
</Method>
</Class>
</Export>
